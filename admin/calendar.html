<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>캘린더 관리</title>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
    <!--AOS 애니메이션-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"
    />
    <!--스와이퍼-->
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/editor/latest/toastui-editor.css"
    />
    <link rel="stylesheet" href="./css/admin.css" />
    <link rel="stylesheet" href="./css/custom.css" />
    <link rel="stylesheet" href="./css/admin.css" />
    <!-- JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
    <script src="./js/admin.js"></script>
  </head>

  <body>
    <div class="admin_common">
      <!----======== 관리자 레이아웃 상단    ========---->
      <section id="admin_header_wrap">
        <div id="admin_top_area"></div>
        <div id="admin_side_area"></div>
      </section>
      <!----======== 관리자 레이아웃 상단 끝 ========---->
      <!----======== 내용부분 ========---->
      <section id="admin_contents_wrap">
        <p class="title">캘린더 관리</p>
        <article class="calendar_area">
          <div class="label_wrap">
            <button onclick="openPopup4('add_schedule.html',900, 800)">
              일정추가
            </button>
            <label class="w-100">
              <select class="w-100">
                <option>전체</option>
                <option>지원 공모사업</option>
                <option>취업공고</option>
                <option>창업/경영</option>
                <option>교육사업</option>
                <option>지역사업</option>
                <option>기타행사</option>
              </select>
            </label>
          </div>
          <div
            id="calendar"
            tabindex="0"
            role="application"
            aria-live="polite"
            aria-label="월별 캘린더 테이블"
          ></div>
        </article>
      </section>
      <!----======== 내용부분 끝 ========---->
      <!--모달-->
      <article id="schedule_list" class="order_modal fullpage_modal">
        <div class="board">
          <a class="circle_btn" onclick="close_modal()"
            ><i class="fa fa-times" aria-hidden="true"></i
          ></a>
          <p class="title">일정 목록</p>
          <p class="order_number">날짜 : <span>2024-10-24 목요일</span></p>
          <table class="table_defalt">
            <thead>
              <tr>
                <th width="30px"><input type="checkbox" /></th>
                <th width="80px">관리</th>
                <th width="120px">카테고리</th>
                <th width="300px">지원사업명</th>
                <th width="*">일정</th>
                <th width="200px">기타</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><input type="checkbox" /></td>
                <td>
                  <button
                    type="button"
                    class="in_btn m-0"
                    onclick="openPopup4('detail_schedule.html',900, 800)"
                  >
                    수정
                  </button>
                </td>
                <td>지원 공모사업</td>
                <td>지원 공모사업</td>
                <td>2024-10-23 ~ 2024-12-08</td>
                <td>지원 공모사업 요약</td>
              </tr>
            </tbody>
          </table>
          <div id="pagination" class="page_wrap"></div>
        </div>
      </article>

      <!-- 달력 -->
      <script>
        const calendarEl = document.getElementById("calendar");
        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: "dayGridMonth",
          headerToolbar: {
            left: "prev,next title",
            center: "",
            right: "",
          },
          titleFormat: function (date) {
            return `${date.date.year}년 ${String(date.date.month + 1).padStart(
              2,
              "0"
            )}월`;
          },
          locale: "ko",
          dayCellContent: function (args) {
            return args.date.getDate().toString();
          },

          // dummy data
          events: [
            {
              title: "지원 공모사업",
              start: "2024-12-03",
              end: "2024-12-03",
            },
            {
              title: "지원 공모사업",
              start: "2024-12-03",
              end: "2024-12-03",
            },
            {
              title: "지원 공모사업",
              start: "2024-12-03",
              end: "2024-12-03",
            },
            {
              title: "예술인 지원 공모사업",
              start: "2024-12-04",
              allDay: "2024-12-04",
            },
            {
              title: "취업공고",
              start: "2024-12-24",
              end: "2024-12-29",
            },
            {
              title: "취업공고",
              start: "2024-12-24",
              end: "2024-12-29",
            },
            {
              title: "취업공고",
              start: "2024-12-24",
              end: "2024-12-29",
            },
            {
              title: "창업 및 경영",
              start: "2024-12-24",
              end: "2024-12-27",
            },
          ],
          height: "auto",
          dayMaxEvents: 2,
          eventOverlap: false,
          moreLinkContent: function (args) {
            return `+ 일정 더보기`;
          },
          moreLinkClick: function (info) {
            const eventsOnDate = info.allSegs.map((seg) => seg.event._def);
            console.log(`Events on ${info.dateStr}:`, eventsOnDate);
            open_modal("#schedule_list");
            return false;
          },
          eventClick: function (info) {
            openPopup4("detail_schedule.html", 900, 800);
          },
          dateClick: function (info) {
            console.log(info);
          },
        });
        calendar.render();
      </script>

      <script>
        function open_modal(modal_id) {
          $(modal_id).addClass("on");
        }
        $(".modal_close").on("click", function () {
          $(".fullpage_modal").removeClass("on");
        });
        function close_modal() {
          $(".fullpage_modal").removeClass("on");
        }
      </script>

      <!--모달끝-->
      <!----======== 관리자 레이아웃 하단    ========---->
      <section id="admin_footer_wrap"></section>
      <!----======== 관리자 레이아웃 하단 끝 ========---->
    </div>

    <script>
      const editor = new toastui.Editor({
        el: document.querySelector("#content"), // 에디터를 적용할 요소 (컨테이너)
        height: "300px", // 에디터 영역의 높이 값 (OOOpx || auto)
        initialEditType: "wysiwyg", // 최초로 보여줄 에디터 타입 (markdown || wysiwyg)
        initialValue: "내용을 입력해 주세요.", // 내용의 초기 값으로, 반드시 마크다운 문자열 형태여야 함
        previewStyle: "vertical", // 마크다운 프리뷰 스타일 (tab || vertical)
      });
    </script>

    <script>
      // 공통 영역
      $(document).ready(function () {
        $("#admin_top_area").load("./include/header.html");
        $("#admin_side_area").load("./include/sidebar.html");
        $("#pagination").load("./include/pagination.html");
        $("#admin_footer_wrap").load("./include/footer.html");
      });
    </script>
  </body>
</html>
